import{d as G,r as p,m as k,f as J,a as K,b as Q,c as U,u as W,s as X,e as D,o as Y,g as Z,h as i,w as _,i as o,I as ss,j as a,k as s,t as g,l as r,n as ts,p as os,q as es,v as ns,x as P,y as d,z as C,A,B as w,C as as,F as x,D as T,E as ls,G as is,H as $,_ as cs}from"./index-C9U6OB9Y.js";const rs=G("home",()=>{const h=p([]),l=p([]),c=p([]),v=p(!1),m=p(null),f=async()=>{v.value=!0,m.value=null;try{const[u,S,b]=await Promise.all([k.getPersonalizedPlaylists(6),k.getTopArtists(12),k.getNewAlbums(6)]);h.value=u.result.map(J),l.value=S.artists.map(K),c.value=b.albums.map(Q),console.log("首页数据加载完成:",{playlists:h.value.length,artists:l.value.length,albums:c.value.length})}catch(u){console.error("加载首页数据失败:",u),m.value=u instanceof Error?u.message:"数据加载失败"}finally{v.value=!1}};return{recommendedPlaylists:h,popularArtists:l,newAlbums:c,loading:v,error:m,loadHomeData:f,refresh:async()=>{await f()}}}),ds={class:"home-page"},us={class:"welcome-header"},ms={class:"greeting"},gs={class:"search-bar-container"},vs={class:"quick-actions"},ps={class:"action-grid"},_s={class:"action-icon daily"},hs={class:"date"},fs={class:"action-icon"},ys={class:"action-icon"},bs={class:"action-icon"},ks={class:"content-section"},Cs={class:"section-header"},As={key:0,class:"loading-container"},ws={key:1,class:"playlist-grid"},xs=["onClick"],Ts={class:"play-button"},Is={class:"playlist-name s-text-truncate"},Ss={key:2,class:"empty-state"},Ds={class:"content-section"},Ps={class:"section-header"},$s={class:"artist-grid"},zs=["onClick"],Bs={class:"artist-avatar"},Fs=["src","alt"],Rs={class:"artist-name s-text-truncate"},Es={class:"content-section"},Hs={class:"section-header"},Ms={class:"album-grid"},Ns=["onClick"],Os={class:"album-name s-text-truncate"},js={class:"album-artist s-text-truncate s-text-secondary"},Vs=U({__name:"index",setup(h){const l=is(),c=rs(),v=W(),{recommendedPlaylists:m,popularArtists:f,newAlbums:I,loading:u,error:S}=X(c),b=D(()=>{const n=new Date().getHours();return n<6?"夜深了":n<9?"早上好":n<12?"上午好":n<18?"下午好":n<22?"晚上好":"夜深了"}),z=D(()=>new Date().getDate()),B=()=>{l.push("/daily-recommend")},F=()=>{console.log("启动私人FM")},R=()=>{l.push("/tabs/library")},E=()=>{l.push("/search")},H=()=>{l.push("/tabs/discover")},M=()=>{l.push("/tabs/discover")},N=()=>{l.push("/tabs/discover")},O=n=>{l.push(`/playlist/${n}`)},j=n=>{l.push(`/artist/${n}`)},V=n=>{l.push(`/album/${n}`)},q=n=>{const t=n.target;t.src!=="/images/album.jpg"&&(t.src="/images/album.jpg")},L=()=>{v.setTestSong(),console.log("设置测试歌曲")};return Y(async()=>{console.log("首页组件已挂载，开始加载数据..."),await c.loadHomeData(),console.log("数据加载完成后的状态检查:"),console.log("推荐歌单数量:",c.recommendedPlaylists.length),console.log("热门歌手数量:",c.popularArtists.length),console.log("新专辑数量:",c.newAlbums.length)}),(n,t)=>(i(),Z(o(ss),null,{default:_(()=>[a(o(ls),{fullscreen:!0},{default:_(()=>[s("div",ds,[s("div",us,[s("h1",ms,g(b.value),1),t[0]||(t[0]=s("p",{class:"subtitle s-text-secondary"},"由此开启好心情 ~",-1))]),s("div",gs,[s("div",{class:"search-bar",onClick:E},[a(o(r),{icon:o(ts),class:"search-icon"},null,8,["icon"]),t[1]||(t[1]=s("span",{class:"search-placeholder"},"搜索歌曲、歌手、专辑",-1))])]),s("div",vs,[s("div",ps,[s("div",{class:"action-item",onClick:B},[s("div",_s,[a(o(r),{icon:o(os)},null,8,["icon"]),s("span",hs,g(z.value),1)]),t[2]||(t[2]=s("span",{class:"action-label"},"每日推荐",-1))]),s("div",{class:"action-item",onClick:F},[s("div",fs,[a(o(r),{icon:o(es)},null,8,["icon"])]),t[3]||(t[3]=s("span",{class:"action-label"},"私人FM",-1))]),s("div",{class:"action-item",onClick:R},[s("div",ys,[a(o(r),{icon:o(ns)},null,8,["icon"])]),t[4]||(t[4]=s("span",{class:"action-label"},"我喜欢的",-1))]),s("div",{class:"action-item",onClick:L},[s("div",bs,[a(o(r),{icon:o(P)},null,8,["icon"])]),t[5]||(t[5]=s("span",{class:"action-label"},"测试播放",-1))])])]),s("section",ks,[s("div",Cs,[t[7]||(t[7]=s("h2",{class:"section-title"},"为你推荐",-1)),a(o(C),{fill:"clear",size:"small",onClick:H},{default:_(()=>[t[6]||(t[6]=A(" 更多 ",-1)),a(o(r),{icon:o(w)},null,8,["icon"])]),_:1})]),o(u)?(i(),d("div",As,[a(o(as)),t[8]||(t[8]=s("p",null,"加载中...",-1))])):o(m).length>0?(i(),d("div",ws,[(i(!0),d(x,null,T(o(m),e=>(i(),d("div",{key:e.id,class:"playlist-card",onClick:y=>O(e.id)},[s("div",{class:"playlist-cover",style:$({backgroundImage:`url(${e.cover})`})},[s("div",Ts,[a(o(r),{icon:o(P)},null,8,["icon"])])],4),s("h3",Is,g(e.name),1)],8,xs))),128))])):(i(),d("div",Ss,[...t[9]||(t[9]=[s("p",null,"暂无推荐歌单",-1)])]))]),s("section",Ds,[s("div",Ps,[t[11]||(t[11]=s("h2",{class:"section-title"},"热门歌手",-1)),a(o(C),{fill:"clear",size:"small",onClick:M},{default:_(()=>[t[10]||(t[10]=A(" 更多 ",-1)),a(o(r),{icon:o(w)},null,8,["icon"])]),_:1})]),s("div",$s,[(i(!0),d(x,null,T(o(f),e=>(i(),d("div",{key:e.id,class:"artist-card",onClick:y=>j(e.id)},[s("div",Bs,[s("img",{src:e.avatar||"/images/default-avatar.jpg",alt:e.name,onError:q},null,40,Fs)]),s("h3",Rs,g(e.name),1)],8,zs))),128))])]),s("section",Es,[s("div",Hs,[t[13]||(t[13]=s("h2",{class:"section-title"},"新碟上架",-1)),a(o(C),{fill:"clear",size:"small",onClick:N},{default:_(()=>[t[12]||(t[12]=A(" 更多 ",-1)),a(o(r),{icon:o(w)},null,8,["icon"])]),_:1})]),s("div",Ms,[(i(!0),d(x,null,T(o(I),e=>{var y;return i(),d("div",{key:e.id,class:"album-card",onClick:qs=>V(e.id)},[s("div",{class:"album-cover",style:$({backgroundImage:`url(${e.cover})`})},null,4),s("h3",Os,g(e.name),1),s("p",js,g(((y=e.artist)==null?void 0:y.name)||"未知艺人"),1)],8,Ns)}),128))])])])]),_:1})]),_:1}))}}),Gs=cs(Vs,[["__scopeId","data-v-3e67dafb"]]);export{Gs as default};
//# sourceMappingURL=index-DYevdrb0.js.map
