{"version":3,"file":"index-C9F1H9NZ.js","sources":["../../src/stores/album.ts","../../src/views/Album/index.vue"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport { musicApi, formatSong } from '@/api/music'\n\nexport interface AlbumInfo {\n  id: number\n  name: string\n  cover: string\n  description?: string\n  artist: string\n  artistId: number\n  publishTime: string\n  company?: string\n  songsCount: number\n  playCount?: number\n  isSubscribed?: boolean\n}\n\nexport interface AlbumSong {\n  id: number\n  name: string\n  artists: Array<{ id: number; name: string }>\n  duration?: number\n  track: number\n  disc?: number\n  mv?: number\n  playCount?: number\n}\n\nexport const useAlbumStore = defineStore('album', () => {\n  const currentAlbum = ref<AlbumInfo | null>(null)\n  const albumSongs = ref<AlbumSong[]>([])\n  const loading = ref(false)\n  \n  const loadAlbum = async (id: number) => {\n    if (loading.value) return\n    \n    loading.value = true\n    try {\n      // 获取专辑详情\n      const albumResponse = await musicApi.getAlbumDetail(id)\n      const album = albumResponse.album\n      \n      currentAlbum.value = {\n        id: album.id,\n        name: album.name,\n        cover: album.picUrl || album.blurPicUrl,\n        description: album.description,\n        artist: album.artist?.name || album.artists?.[0]?.name || '未知艺人',\n        artistId: album.artist?.id || album.artists?.[0]?.id || 0,\n        publishTime: album.publishTime || album.publishTime,\n        company: album.company,\n        songsCount: album.size || 0,\n        playCount: album.playCount,\n        isSubscribed: album.subType === 1\n      }\n      \n      // 专辑歌曲直接从专辑详情中获取\n      if (album.songs && album.songs.length > 0) {\n        albumSongs.value = album.songs.map((song: any, index: number) => ({\n          id: song.id,\n          name: song.name,\n          artists: song.ar || song.artists || [],\n          duration: Math.floor(song.dt / 1000) || song.duration,\n          track: song.no || index + 1,\n          disc: song.cd || 1,\n          mv: song.mv || undefined,\n          playCount: song.playCount\n        }))\n      } else {\n        albumSongs.value = []\n      }\n    } catch (error) {\n      console.error('加载专辑信息失败:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n  \n  const subscribeAlbum = async (albumId: number) => {\n    console.log('收藏专辑', albumId)\n    if (currentAlbum.value && currentAlbum.value.id === albumId) {\n      currentAlbum.value.isSubscribed = true\n    }\n  }\n  \n  const unsubscribeAlbum = async (albumId: number) => {\n    console.log('取消收藏专辑', albumId)\n    if (currentAlbum.value && currentAlbum.value.id === albumId) {\n      currentAlbum.value.isSubscribed = false\n    }\n  }\n  \n  const playAlbum = async (albumId: number, startIndex: number = 0) => {\n    console.log('播放专辑', albumId, '从第', startIndex + 1, '首开始')\n  }\n  \n  const clearAlbum = () => {\n    currentAlbum.value = null\n    albumSongs.value = []\n  }\n  \n  return {\n    currentAlbum,\n    albumSongs,\n    loading,\n    \n    loadAlbum,\n    subscribeAlbum,\n    unsubscribeAlbum,\n    playAlbum,\n    clearAlbum\n  }\n})","<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-buttons slot=\"start\">\n          <ion-back-button default-href=\"/tabs/discover\"></ion-back-button>\n        </ion-buttons>\n        <ion-title>专辑详情</ion-title>\n        <ion-buttons slot=\"end\">\n          <ion-button fill=\"clear\" @click=\"shareAlbum\">\n            <ion-icon :icon=\"shareOutline\"></ion-icon>\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n    </ion-header>\n    \n    <ion-content>\n      <div v-if=\"loading\" class=\"loading-container\">\n        <ion-spinner></ion-spinner>\n        <p>加载中...</p>\n      </div>\n      \n      <div v-else-if=\"currentAlbum\" class=\"album-detail\">\n        <!-- 专辑信息 -->\n        <div class=\"album-header\">\n          <div class=\"album-cover\">\n            <img :src=\"currentAlbum.cover\" :alt=\"currentAlbum.name\" />\n            <div class=\"play-button\" @click=\"playAll\">\n              <ion-icon :icon=\"play\"></ion-icon>\n            </div>\n          </div>\n          <div class=\"album-info\">\n            <h1 class=\"album-name\">{{ currentAlbum.name }}</h1>\n            <div class=\"album-artist\" @click=\"goToArtist(currentAlbum.artistId)\">\n              {{ currentAlbum.artist }}\n            </div>\n            <div class=\"album-stats\">\n              <span>{{ currentAlbum.publishTime }}</span>\n              <span>{{ currentAlbum.songsCount }}首</span>\n              <span v-if=\"currentAlbum.playCount\">{{ formatNumber(currentAlbum.playCount) }}播放</span>\n            </div>\n            <div class=\"album-actions\">\n              <ion-button \n                :color=\"currentAlbum.isSubscribed ? 'medium' : 'primary'\"\n                size=\"small\"\n                @click=\"handleSubscribe\"\n              >\n                <ion-icon :icon=\"currentAlbum.isSubscribed ? checkmarkCircle : addCircle\" slot=\"start\"></ion-icon>\n                {{ currentAlbum.isSubscribed ? '已收藏' : '收藏' }}\n              </ion-button>\n              <ion-button size=\"small\" fill=\"outline\" @click=\"downloadAlbum\">\n                <ion-icon :icon=\"downloadOutline\" slot=\"start\"></ion-icon>\n                下载\n              </ion-button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 专辑简介 -->\n        <div v-if=\"currentAlbum.description\" class=\"album-description\">\n          <h3>专辑简介</h3>\n          <p>{{ currentAlbum.description }}</p>\n        </div>\n        \n        <!-- 歌曲列表头部 -->\n        <div class=\"songs-header\">\n          <div class=\"songs-title\">\n            <h3>歌曲列表</h3>\n            <span class=\"songs-count\">{{ albumSongs.length }}首</span>\n          </div>\n          <div class=\"songs-actions\">\n            <ion-button fill=\"clear\" size=\"small\" @click=\"playAll\">\n              <ion-icon :icon=\"play\" slot=\"start\"></ion-icon>\n              播放全部\n            </ion-button>\n            <ion-button fill=\"clear\" size=\"small\" @click=\"selectMode = !selectMode\">\n              <ion-icon :icon=\"selectMode ? close : ellipsisVertical\" slot=\"start\"></ion-icon>\n              {{ selectMode ? '取消' : '管理' }}\n            </ion-button>\n          </div>\n        </div>\n        \n        <!-- 批量操作栏 -->\n        <div v-if=\"selectMode && selectedSongs.length > 0\" class=\"batch-actions\">\n          <span>已选择 {{ selectedSongs.length }} 首</span>\n          <div class=\"batch-buttons\">\n            <ion-button size=\"small\" fill=\"outline\" @click=\"batchPlay\">播放</ion-button>\n            <ion-button size=\"small\" fill=\"outline\" @click=\"batchAddToPlaylist\">添加到歌单</ion-button>\n            <ion-button size=\"small\" fill=\"outline\" @click=\"batchDownload\">下载</ion-button>\n          </div>\n        </div>\n        \n        <!-- 歌曲列表 -->\n        <div class=\"songs-list\">\n          <div \n            v-for=\"(song, index) in albumSongs\" \n            :key=\"song.id\" \n            class=\"song-item\"\n            :class=\"{ 'song-selected': selectedSongs.includes(song.id) }\"\n          >\n            <div v-if=\"selectMode\" class=\"song-checkbox\">\n              <ion-checkbox \n                :checked=\"selectedSongs.includes(song.id)\"\n                @ionChange=\"toggleSongSelection(song.id)\"\n              ></ion-checkbox>\n            </div>\n            <div v-else class=\"song-track\">{{ song.track }}</div>\n            \n            <div class=\"song-info\" @click=\"selectMode ? toggleSongSelection(song.id) : playSong(song, index)\">\n              <div class=\"song-details\">\n                <h4 class=\"song-name\">\n                  {{ song.name }}\n                  <ion-icon v-if=\"song.mv\" :icon=\"videocamOutline\" class=\"mv-icon\"></ion-icon>\n                </h4>\n                <p class=\"song-meta\">\n                  <span v-if=\"song.artists.length > 1\">\n                    {{ song.artists.map(a => a.name).join(' / ') }}\n                  </span>\n                  <span v-if=\"song.duration\">{{ formatDuration(song.duration) }}</span>\n                  <span v-if=\"song.playCount\">{{ formatNumber(song.playCount) }}播放</span>\n                </p>\n              </div>\n            </div>\n            \n            <div v-if=\"!selectMode\" class=\"song-actions\">\n              <ion-button fill=\"clear\" size=\"small\" @click=\"showSongMenu(song, index)\">\n                <ion-icon :icon=\"ellipsisVertical\"></ion-icon>\n              </ion-button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 专辑信息 -->\n        <div class=\"album-meta\">\n          <div v-if=\"currentAlbum.company\" class=\"meta-item\">\n            <span class=\"meta-label\">发行公司</span>\n            <span class=\"meta-value\">{{ currentAlbum.company }}</span>\n          </div>\n          <div class=\"meta-item\">\n            <span class=\"meta-label\">发行时间</span>\n            <span class=\"meta-value\">{{ currentAlbum.publishTime }}</span>\n          </div>\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport {\n  IonPage, IonHeader, IonToolbar, IonTitle, IonContent, IonButtons, IonBackButton,\n  IonButton, IonIcon, IonSpinner, IonCheckbox,\n  actionSheetController, toastController\n} from '@ionic/vue'\nimport {\n  play, addCircle, checkmarkCircle, ellipsisVertical, shareOutline, \n  downloadOutline, videocamOutline, close\n} from 'ionicons/icons'\nimport { useAlbumStore } from '../../stores/album'\nimport { useMusicStore } from '../../stores/music'\n\nconst route = useRoute()\nconst router = useRouter()\nconst albumStore = useAlbumStore()\nconst musicStore = useMusicStore()\n\nconst selectMode = ref(false)\nconst selectedSongs = ref<number[]>([])\n\nconst { currentAlbum, albumSongs, loading } = albumStore\n\nonMounted(() => {\n  const albumId = parseInt(route.params.id as string)\n  if (albumId) {\n    albumStore.loadAlbum(albumId)\n  }\n})\n\nconst formatNumber = (num?: number) => {\n  if (!num) return '0'\n  if (num >= 100000000) {\n    return (num / 100000000).toFixed(1) + '亿'\n  }\n  if (num >= 10000) {\n    return (num / 10000).toFixed(1) + '万'\n  }\n  return num.toString()\n}\n\nconst formatDuration = (duration?: number) => {\n  if (!duration) return '00:00'\n  const minutes = Math.floor(duration / 60)\n  const seconds = duration % 60\n  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n}\n\nconst handleSubscribe = async () => {\n  if (!currentAlbum.value) return\n  \n  try {\n    if (currentAlbum.value.isSubscribed) {\n      await albumStore.unsubscribeAlbum(currentAlbum.value.id)\n      showToast('已取消收藏')\n    } else {\n      await albumStore.subscribeAlbum(currentAlbum.value.id)\n      showToast('收藏成功')\n    }\n  } catch (error) {\n    showToast('操作失败')\n  }\n}\n\nconst playAll = () => {\n  if (albumSongs.value.length > 0) {\n    const formattedSongs = albumSongs.value.map(song => ({\n      id: song.id,\n      name: song.name,\n      artists: song.artists,\n      duration: song.duration,\n      cover: currentAlbum.value?.cover,\n      album: currentAlbum.value ? { id: currentAlbum.value.id, name: currentAlbum.value.name } : undefined\n    }))\n    musicStore.setPlaylist(formattedSongs, 0)\n  }\n}\n\nconst playSong = (song: any, index: number) => {\n  if (selectMode.value) {\n    toggleSongSelection(song.id)\n    return\n  }\n  \n  const formattedSongs = albumSongs.value.map(s => ({\n    id: s.id,\n    name: s.name,\n    artists: s.artists,\n    duration: s.duration,\n    cover: currentAlbum.value?.cover,\n    album: currentAlbum.value ? { id: currentAlbum.value.id, name: currentAlbum.value.name } : undefined\n  }))\n  musicStore.setPlaylist(formattedSongs, index)\n}\n\nconst toggleSongSelection = (songId: number) => {\n  const index = selectedSongs.value.indexOf(songId)\n  if (index > -1) {\n    selectedSongs.value.splice(index, 1)\n  } else {\n    selectedSongs.value.push(songId)\n  }\n}\n\nconst batchPlay = () => {\n  const selectedSongData = albumSongs.value.filter(song => selectedSongs.value.includes(song.id))\n  if (selectedSongData.length > 0) {\n    const formattedSongs = selectedSongData.map(song => ({\n      id: song.id,\n      name: song.name,\n      artists: song.artists,\n      duration: song.duration,\n      cover: currentAlbum.value?.cover,\n      album: currentAlbum.value ? { id: currentAlbum.value.id, name: currentAlbum.value.name } : undefined\n    }))\n    musicStore.setPlaylist(formattedSongs, 0)\n    selectMode.value = false\n    selectedSongs.value = []\n  }\n}\n\nconst batchAddToPlaylist = () => {\n  showToast('功能开发中')\n}\n\nconst batchDownload = () => {\n  showToast('功能开发中')\n}\n\nconst showSongMenu = async (song: any, index: number) => {\n  const actionSheet = await actionSheetController.create({\n    header: song.name,\n    buttons: [\n      {\n        text: '立即播放',\n        icon: play,\n        handler: () => playSong(song, index)\n      },\n      {\n        text: '下一首播放',\n        handler: () => {\n          showToast('已添加到下一首播放')\n        }\n      },\n      {\n        text: '添加到歌单',\n        handler: () => {\n          showToast('功能开发中')\n        }\n      },\n      {\n        text: '下载',\n        icon: downloadOutline,\n        handler: () => {\n          showToast('功能开发中')\n        }\n      },\n      {\n        text: '分享',\n        icon: shareOutline,\n        handler: () => {\n          showToast('功能开发中')\n        }\n      },\n      {\n        text: '取消',\n        role: 'cancel'\n      }\n    ]\n  })\n  \n  await actionSheet.present()\n}\n\nconst goToArtist = (artistId: number) => {\n  router.push(`/artist/${artistId}`)\n}\n\nconst shareAlbum = () => {\n  showToast('功能开发中')\n}\n\nconst downloadAlbum = () => {\n  showToast('功能开发中')\n}\n\nconst showToast = async (message: string) => {\n  const toast = await toastController.create({\n    message,\n    duration: 2000,\n    position: 'bottom'\n  })\n  await toast.present()\n}\n</script>\n\n<style scoped>\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  gap: 16px;\n}\n\n.album-detail {\n  padding: 0;\n}\n\n.album-header {\n  display: flex;\n  padding: 20px;\n  background: linear-gradient(135deg, var(--ion-color-primary-tint), var(--ion-color-secondary-tint));\n  color: white;\n  gap: 16px;\n  position: relative;\n}\n\n.album-cover {\n  flex-shrink: 0;\n  position: relative;\n}\n\n.album-cover img {\n  width: 140px;\n  height: 140px;\n  border-radius: 12px;\n  object-fit: cover;\n}\n\n.play-button {\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: var(--ion-color-primary);\n  font-size: 20px;\n}\n\n.album-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 8px;\n}\n\n.album-name {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 0;\n  line-height: 1.3;\n}\n\n.album-artist {\n  font-size: 16px;\n  opacity: 0.9;\n  cursor: pointer;\n  text-decoration: underline;\n}\n\n.album-stats {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n.album-actions {\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.album-description {\n  padding: 20px;\n  border-bottom: 1px solid var(--ion-color-step-150);\n}\n\n.album-description h3 {\n  margin: 0 0 12px 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.album-description p {\n  margin: 0;\n  line-height: 1.6;\n  color: var(--ion-color-step-600);\n}\n\n.songs-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--ion-color-step-150);\n}\n\n.songs-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.songs-title h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.songs-count {\n  font-size: 12px;\n  color: var(--ion-color-step-600);\n}\n\n.songs-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.batch-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 20px;\n  background: var(--ion-color-step-50);\n  border-bottom: 1px solid var(--ion-color-step-150);\n}\n\n.batch-buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.songs-list {\n  padding: 0 20px;\n}\n\n.song-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--ion-color-step-100);\n  gap: 16px;\n  transition: background-color 0.2s;\n}\n\n.song-item.song-selected {\n  background-color: var(--ion-color-step-50);\n}\n\n.song-track, .song-checkbox {\n  width: 30px;\n  text-align: center;\n  font-size: 14px;\n  color: var(--ion-color-step-600);\n}\n\n.song-info {\n  flex: 1;\n  cursor: pointer;\n}\n\n.song-details {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.song-name {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.mv-icon {\n  font-size: 14px;\n  color: var(--ion-color-danger);\n}\n\n.song-meta {\n  margin: 0;\n  font-size: 12px;\n  color: var(--ion-color-step-600);\n  display: flex;\n  gap: 8px;\n}\n\n.song-actions {\n  display: flex;\n  align-items: center;\n}\n\n.album-meta {\n  padding: 20px;\n  background: var(--ion-color-step-50);\n}\n\n.meta-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--ion-color-step-100);\n}\n\n.meta-item:last-child {\n  border-bottom: none;\n}\n\n.meta-label {\n  color: var(--ion-color-step-600);\n  font-size: 14px;\n}\n\n.meta-value {\n  font-size: 14px;\n  font-weight: 500;\n}\n</style>"],"names":["useAlbumStore","defineStore","currentAlbum","ref","albumSongs","loading","id","album","musicApi","_a","_c","_b","_d","_f","_e","song","index","error","albumId","startIndex","route","useRoute","router","useRouter","albumStore","musicStore","useMusicStore","selectMode","selectedSongs","onMounted","formatNumber","num","formatDuration","duration","minutes","seconds","handleSubscribe","showToast","playAll","formattedSongs","playSong","toggleSongSelection","s","songId","batchPlay","selectedSongData","batchAddToPlaylist","batchDownload","showSongMenu","actionSheetController","play","downloadOutline","shareOutline","goToArtist","artistId","shareAlbum","downloadAlbum","message","toastController","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonButton","IonIcon","IonContent","_openBlock","_createElementBlock","_hoisted_1","IonSpinner","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_toDisplayString","$event","_hoisted_8","_hoisted_10","checkmarkCircle","addCircle","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","close","ellipsisVertical","_createTextVNode","_hoisted_16","_hoisted_17","_hoisted_18","_Fragment","_renderList","_normalizeClass","_hoisted_19","IonCheckbox","_hoisted_20","_hoisted_22","_hoisted_23","videocamOutline","_hoisted_24","_hoisted_25","a","_hoisted_26","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33"],"mappings":"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"}