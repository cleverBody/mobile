import{c as me,u as pe,r as S,e as d,g as fe,h as p,w as a,i as e,I as ye,j as l,J as he,L as T,z as n,l as i,au as ke,K as Ie,A as f,av as be,M as Ce,k as s,aw as j,ax as D,t as _,Y as Se,v as Pe,aq as xe,ay as N,az as ze,a9 as Oe,aA as we,aB as Me,x as Be,aC as Fe,a1 as Le,a2 as P,X as x,aD as H,y as h,D as $,F as A,E as Ve,G as Ee,aE as Te,ad as je,aF as De,aG as Ne,aH as He,a8 as $e,a3 as Ae,aI as Ge,_ as Re}from"./index-C9U6OB9Y.js";import{u as qe}from"./player-DkPa5aRc.js";const Je={class:"full-player"},Ke={class:"player-background"},Ue=["src","alt"],Xe={class:"player-main"},Ye={class:"album-cover-container"},Qe=["src","alt"],We={class:"song-info"},Ze={class:"song-title"},el={class:"artist-name"},ll={class:"action-buttons"},sl={class:"progress-section"},al={class:"progress-container"},tl={class:"time-display"},ol={class:"current-time"},nl={class:"total-time"},il={class:"player-controls"},cl={class:"player-tabs"},rl={class:"tab-content"},ul={class:"lyric-container"},dl={class:"tab-content"},vl={class:"playlist-container"},_l={class:"playlist-header"},gl={class:"playlist-list"},ml=["onClick"],pl={class:"song-index"},fl={class:"song-info"},yl={class:"song-name"},hl={class:"song-artist"},kl=me({__name:"index",setup(Il){const G=Ee(),c=pe(),r=qe(),g=S("player"),k=S(!1),R=S(["暂无歌词","请欣赏美妙的音乐"]),v=d(()=>c.currentSong),I=d(()=>c.playlist),q=d(()=>c.currentIndex),b=d(()=>r.isPlaying),z=d(()=>{var o;return c.isLiked((o=v.value)==null?void 0:o.id)}),J=d(()=>c.hasPrev),K=d(()=>c.hasNext),U=d(()=>r.progressPercent),X=d(()=>r.currentTimeFormatted),Y=d(()=>r.durationFormatted),Q=()=>{G.back()},W=()=>{console.log("显示更多操作")},Z=()=>{v.value&&c.toggleLike(v.value.id)},ee=()=>{console.log("显示评论")},le=()=>{g.value="playlist"},se=()=>{console.log("分享歌曲")},ae=o=>{if(!k.value)return;const y=o.detail.value/100*r.duration;r.seek(y)},te=()=>{b.value?r.pause():r.play()},oe=()=>{c.prevSong()},ne=()=>{c.nextSong()},ie=()=>{r.togglePlayMode()},ce=()=>{console.log("音量控制")},re=()=>{switch(r.playMode){case"random":return je;case"repeat":return Te;default:return N}},ue=()=>{const o=r.volume;return o===0?De:o<.3?Ne:o<.7?He:$e},de=o=>{g.value=o.detail.value},ve=o=>{c.currentIndex=o,c.setCurrentSong(I.value[o])},_e=o=>{console.log("移除歌曲",o)},ge=()=>{console.log("清空播放列表")},O=o=>{const t=o.target;t.src="/images/album.jpg"};return(o,t)=>(p(),fe(e(ye),null,{default:a(()=>[l(e(Ce),{class:"player-header"},{default:a(()=>[l(e(he),null,{default:a(()=>[l(e(T),{slot:"start"},{default:a(()=>[l(e(n),{onClick:Q},{default:a(()=>[l(e(i),{icon:e(ke)},null,8,["icon"])]),_:1})]),_:1}),l(e(Ie),null,{default:a(()=>[...t[3]||(t[3]=[f("正在播放",-1)])]),_:1}),l(e(T),{slot:"end"},{default:a(()=>[l(e(n),{onClick:W},{default:a(()=>[l(e(i),{icon:e(be)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),l(e(Ve),{fullscreen:!0,class:"player-content"},{default:a(()=>{var y,w,M,B,F,L,V;return[s("div",Je,[s("div",Ke,[s("img",{src:((y=v.value)==null?void 0:y.cover)||"/images/album.jpg",alt:(w=v.value)==null?void 0:w.name,onError:O},null,40,Ue),t[4]||(t[4]=s("div",{class:"background-overlay"},null,-1))]),s("div",Xe,[s("div",Ye,[s("div",{class:D(["album-cover",{spinning:b.value}])},[s("img",{src:((M=v.value)==null?void 0:M.cover)||"/images/album.jpg",alt:(B=v.value)==null?void 0:B.name,onError:O},null,40,Qe)],2)]),s("div",We,[s("h1",Ze,_(((F=v.value)==null?void 0:F.name)||"未知歌曲"),1),s("p",el,_(((V=(L=v.value)==null?void 0:L.artists)==null?void 0:V.map(u=>u.name).join(", "))||"未知艺人"),1)]),s("div",ll,[l(e(n),{fill:"clear",size:"large",onClick:Z,color:z.value?"primary":"medium"},{default:a(()=>[l(e(i),{icon:z.value?e(Se):e(Pe)},null,8,["icon"])]),_:1},8,["color"]),l(e(n),{fill:"clear",size:"large",onClick:ee},{default:a(()=>[l(e(i),{icon:e(xe)},null,8,["icon"])]),_:1}),l(e(n),{fill:"clear",size:"large",onClick:le},{default:a(()=>[l(e(i),{icon:e(N)},null,8,["icon"])]),_:1}),l(e(n),{fill:"clear",size:"large",onClick:se},{default:a(()=>[l(e(i),{icon:e(ze)},null,8,["icon"])]),_:1})]),s("div",sl,[s("div",al,[l(e(Oe),{value:U.value,min:0,max:100,onIonInput:ae,onIonStart:t[0]||(t[0]=u=>k.value=!0),onIonEnd:t[1]||(t[1]=u=>k.value=!1)},null,8,["value"])]),s("div",tl,[s("span",ol,_(X.value),1),s("span",nl,_(Y.value),1)])]),s("div",il,[l(e(n),{fill:"clear",size:"large",onClick:ie},{default:a(()=>[l(e(i),{icon:re()},null,8,["icon"])]),_:1}),l(e(n),{fill:"clear",size:"large",onClick:oe,disabled:!J.value},{default:a(()=>[l(e(i),{icon:e(we)},null,8,["icon"])]),_:1},8,["disabled"]),l(e(n),{class:"play-button",fill:"solid",size:"large",onClick:te},{default:a(()=>[l(e(i),{icon:b.value?e(Me):e(Be)},null,8,["icon"])]),_:1}),l(e(n),{fill:"clear",size:"large",onClick:ne,disabled:!K.value},{default:a(()=>[l(e(i),{icon:e(Fe)},null,8,["icon"])]),_:1},8,["disabled"]),l(e(n),{fill:"clear",size:"large",onClick:ce},{default:a(()=>[l(e(i),{icon:ue()},null,8,["icon"])]),_:1})])]),s("div",cl,[l(e(Le),{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=u=>g.value=u),onIonChange:de},{default:a(()=>[l(e(P),{value:"player"},{default:a(()=>[l(e(x),null,{default:a(()=>[...t[5]||(t[5]=[f("播放器",-1)])]),_:1})]),_:1}),l(e(P),{value:"lyric"},{default:a(()=>[l(e(x),null,{default:a(()=>[...t[6]||(t[6]=[f("歌词",-1)])]),_:1})]),_:1}),l(e(P),{value:"playlist"},{default:a(()=>[l(e(x),null,{default:a(()=>[...t[7]||(t[7]=[f("列表",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),j(s("div",rl,[s("div",ul,[(p(!0),h(A,null,$(R.value,(u,m)=>(p(),h("div",{class:"lyric-line",key:m},_(u),1))),128))])],512),[[H,g.value==="lyric"]]),j(s("div",dl,[s("div",vl,[s("div",_l,[s("h3",null,"播放列表 ("+_(I.value.length)+")",1),l(e(n),{fill:"clear",size:"small",onClick:ge},{default:a(()=>[...t[8]||(t[8]=[f(" 清空列表 ",-1)])]),_:1})]),s("div",gl,[(p(!0),h(A,null,$(I.value,(u,m)=>{var E;return p(),h("div",{key:u.id,class:D(["playlist-item",{active:m===q.value}]),onClick:C=>ve(m)},[s("div",pl,_(m+1),1),s("div",fl,[s("h4",yl,_(u.name),1),s("p",hl,_((E=u.artists)==null?void 0:E.map(C=>C.name).join(", ")),1)]),l(e(n),{fill:"clear",size:"small",onClick:Ae(C=>_e(m),["stop"])},{default:a(()=>[l(e(i),{icon:e(Ge)},null,8,["icon"])]),_:1},8,["onClick"])],10,ml)}),128))])])],512),[[H,g.value==="playlist"]])])]}),_:1})]),_:1}))}}),Sl=Re(kl,[["__scopeId","data-v-6631b125"]]);export{Sl as default};
//# sourceMappingURL=index-BqUjpbM9.js.map
